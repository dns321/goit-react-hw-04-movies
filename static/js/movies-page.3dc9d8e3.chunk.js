(this.webpackJsonplesson1=this.webpackJsonplesson1||[]).push([[5],{102:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.r(e),n.d(e,"MoviesPage",(function(){return q}));var o=n(56),c=n(57),i=n(60),s=n(59),u=n(0),p=n(62),l=(n(93),n(2)),h=n.n(l),f=n(1),v=function(t){var e=t.fetchImajes;return Object(f.jsx)("button",{className:"Button",type:"button",onClick:e,children:"Load more"})};v.prototype={fetchImajes:h.a.func.isRequired};var m=v,d=n(14),b=n.n(d),y=(n(94),n(95),function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(f.jsx)(b.a,{className:"Loader",type:"ThreeDots",color:"#00BFFF",height:100,width:300})}}]),n}(u.Component)),g=n(3),j=(n(96),function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.handleChange=function(e){t.setState({query:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.query),t.setState({query:""})},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this,e=this.state.query;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{action:"",onSubmit:this.handleSubmit,children:[Object(f.jsx)("input",{type:"text",placeholder:"Input movies",value:e,onChange:this.handleChange}),Object(f.jsx)("button",{type:"submit",onClick:function(){return t.props.history.push({pathname:t.props.location.pathname,search:"query=".concat(e),query:"".concat(e)})},children:"Search"})]})})}}]),n}(u.Component)),w=Object(g.g)(j),O=n(58),q=function(t){Object(i.a)(n,t);var e=Object(s.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).state={films:[],page:1,query:"",error:null,isLoading:!1,showBtn:!0},t.onChengeQuery=function(e){t.setState({query:e,page:1,films:[],error:null})},t.fetchMovies=function(){t.setState({isLoading:!0});var e=t.state,n={query:e.query,page:e.page};O.a.fetchMoviesPage(n).then((function(e){t.setState((function(n){return{films:[].concat(a(n.films),a(e.results)),page:n.page+1,query:t.props.location.query}})),t.lengthArr(e.results.length),t.windowScroll()})).finally((function(){t.state.films.length<1?t.setState({error:!0}):t.setState({error:!1}),t.setState({isLoading:!1})}))},t.windowScroll=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},t.lengthArr=function(e){e<19&&t.setState({showBtn:!1})},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this,e={query:this.props.location.query,page:this.state.page};this.props.location.query&&O.a.fetchMoviesPage(e).then((function(){t.setState((function(){return{query:t.props.location.query}})),t.windowScroll()})).finally((function(){t.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(t,e){e.query!==this.state.query&&this.fetchMovies()}},{key:"render",value:function(){var t=this.state,e=t.films,n=(t.query,t.error),r=t.isLoading,a=t.showBtn,o=e.length>0&&!r&&a;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(w,{onSubmit:this.onChengeQuery}),Object(f.jsx)(p.a,{films:e}),n&&Object(f.jsx)("h2",{children:"Something went wrong"}),r&&Object(f.jsx)(y,{}),o&&Object(f.jsx)(m,{fetchImajes:this.fetchMovies})]})}}]),n}(u.Component);e.default=q},58:function(t,e,n){"use strict";var r=n(54),a=n.n(r),o=n(55),c=n(64),i=n.n(c),s=n(2),u=n.n(s);i.a.defaults.baseURL="https://api.themoviedb.org/3",i.a.defaults.params={api_key:"69b18394d8ba2f066276fc5ba1d70545"};var p=function(){var t=Object(o.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/trending/movie/day");case 3:return e=t.sent,n=e.data,t.abrupt("return",n);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,r=e.page,t.prev=1,t.next=4,i.a.get("/search/movie",{params:{query:n,page:r}});case 4:return o=t.sent,c=o.data,t.abrupt("return",c);case 9:throw t.prev=9,t.t0=t.catch(1),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/credits"));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.get("/movie/".concat(e,"/reviews"));case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();l.propTypes={query:u.a.string.isRequired,page:u.a.number.isRequired},h.propTypes={movieId:u.a.number.isRequired},f.propTypes={movieId:u.a.number.isRequired},v.propTypes={movieId:u.a.number.isRequired},e.a={fetchMoviesDay:p,fetchMoviesPage:l,fetchMoviesDetail:h,fetchCast:f,fetchReviews:v}},61:function(t,e,n){"use strict";e.a=n.p+"static/media/default-image.5fa9fc41.png"},62:function(t,e,n){"use strict";n(0);var r=n(9),a=n(3),o=(n(63),n(61)),c=n(1);e.a=Object(a.g)((function(t){var e=t.films,n=t.location;return Object(c.jsx)("ul",{className:"items-movies-list",children:e.map((function(t){return Object(c.jsx)("li",{className:"item-movies-list",children:Object(c.jsxs)(r.b,{to:{apdateList:n.apdateList,pathname:"/movies/".concat(t.id),state:{from:n.pathname,query:n.query}},children:[Object(c.jsx)("img",{src:t.poster_path?"".concat("https://www.themoviedb.org/t/p/w600_and_h900_bestv2").concat(t.poster_path):o.a,alt:"poster",width:"200",height:"300"}),Object(c.jsx)("p",{children:t.original_title})]})},t.id)}))})}))},63:function(t,e,n){},93:function(t,e,n){},94:function(t,e,n){},95:function(t,e,n){},96:function(t,e,n){}}]);
//# sourceMappingURL=movies-page.3dc9d8e3.chunk.js.map